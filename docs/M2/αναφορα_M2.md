# Αναφορά M2 (Ontology-Aware + Validation Integration)

## Τρέχοντα Assets (υπάρχουν ήδη)
- Gold οντολογία: `gold/atm_gold.ttl` (αντί για οποιοδήποτε `gold_v1.ttl`).
- SHACL shapes: `gold/shapes_atm.ttl` (δεν ξαναπαράγεται).
- Baseline draft: `build/pred.ttl` (raw output χωρίς validation/repair).
- Προβλέψεις/προσωρινά αρχεία γράφονται στο `build/` ή στο νέο `runs/E3_no_repair/` όταν εκτελεστεί το preset.

## Τι κάνει το preset E3 (no-repair)
- Drafting με ontology-aware prompting (schema grounding από `gold/atm_gold.ttl`).
- Validation με SHACL (`gold/shapes_atm.ttl`) και reasoner (owlready2/Pellet αν διαθέσιμος).
- Υπολογισμός metrics (exact/semantic placeholders) vs gold.
- CQ execution από `atm_cqs.rq` αν δοθεί στο config.

## Εντολή εκτέλεσης
Δεν δημιουργώ εδώ τα outputs. Για να τα πάρεις, τρέξε μόνος σου:

```bash
python scripts/run_atm_examples.py --config configs/atm_ontology_aware.json
```

Η εντολή χρησιμοποιεί την default διαμόρφωση και γράφει όλα τα αποτελέσματα στον φάκελο `runs/E3_no_repair/`.

## Αναμενόμενη δομή εξόδου (μετά την εκτέλεση)
```
runs/E3_no_repair/
  iter0/pred.ttl              # draft της iter0 (χωρίς repair loop)
  validation_report.ttl       # SHACL report που αντιστοιχεί στο gold/shapes_atm.ttl
  validation_summary.json     # συνοπτικά hard/soft counts
  metrics_exact.json          # precision/recall/F1 vs gold/atm_gold.ttl
  metrics_semantic.json       # semantic placeholder (ίδια με exact προς το παρόν)
  reasoning_report.json       # unsat classes από τον reasoner (αν υπάρχει)
  cq_results_iter0.json       # αποτελέσματα CQs (αν δώσαμε atm_cqs.rq)
```

## Σημειώσεις χρήσης
- Μην αντικαθιστάς/τροποποιείς τα περιεχόμενα του φακέλου `gold/`.
- Το σχήμα SHACL (`gold/shapes_atm.ttl`) θεωρείται ήδη έτοιμο και δεν ξαναχτίζεται.
- Τα αρχεία στο `build/` (π.χ. `build/pred.ttl`) παραμένουν ως έχουν· το E3 preset γράφει σε ξεχωριστό φάκελο `runs/`.
- Αν χρειαστεί να αλλάξεις paths, ενημέρωσε το `configs/atm_ontology_aware.json` αντί να πειράξεις τον κώδικα του runner.
