# 5.2.1 Parsing/Normalization

Η προεπεξεργασία στο OG–NSD είναι ελαφριά αλλά κρίσιμη για τη σωστή είσοδο του pipeline. Η βασική λογική βρίσκεται στο `og_nsd/requirements.py`, όπου ο `RequirementLoader` φορτώνει τα JSON/JSONL αρχεία και εξασφαλίζει ότι οι απαιτήσεις αποδίδονται ως καθαρές συμβολοσειρές. Τα βασικά βήματα περιλαμβάνουν trimming whitespace, απομάκρυνση κενών γραμμών και έλεγχο ότι κάθε απαίτηση έχει έγκυρο πεδίο κειμένου. Αυτό το στάδιο είναι απαραίτητο, καθώς το LLM step είναι ευαίσθητο σε θορυβώδη inputs και το pipeline πρέπει να εγγυάται ομοιομορφία.

Σε επίπεδο parsing, το σύστημα υποστηρίζει δύο formats: (α) JSONL, όπου κάθε γραμμή είναι μεμονωμένο αντικείμενο απαίτησης, και (β) JSON που περιέχει λίστα. Αυτό είναι πρακτικό για διαφορετικούς τρόπους συλλογής δεδομένων. Ο loader μετατρέπει τα inputs σε ενιαία λίστα strings, ώστε οι επόμενες φάσεις να είναι format-agnostic. Για τον έλεγχο μεγάλων corpora, το σύστημα υποστηρίζει `--max-reqs`, το οποίο περιορίζει τον αριθμό απαιτήσεων που θα χρησιμοποιηθούν σε μία εκτέλεση.

Η normalization δεν περιλαμβάνει βαριά γλωσσική επεξεργασία (π.χ. stemming ή lemmatization), διότι ο στόχος είναι να διατηρηθεί η φυσική γλώσσα έτσι όπως είναι καταγεγραμμένη. Παρ’ όλα αυτά, εφαρμόζεται ελαφριά εξυγίανση ώστε να μην υπάρχουν malformed lines που θα αποτύχουν στην downstream αλυσίδα. Η σχεδιαστική επιλογή εδώ είναι να μην αλλοιωθεί το αρχικό κείμενο των απαιτήσεων, καθώς αυτές αποτελούν την “ground truth” του συστήματος.

Για τις οντολογικές εισόδους (base ontology και shapes), το parsing/normalization γίνεται έμμεσα μέσω `rdflib` και `pyshacl`. Ο parser αποδέχεται Turtle και διασφαλίζει ότι οι RDF triples είναι syntactically valid. Σε περίπτωση σφάλματος, το pipeline καταγράφει αποτυχία στο report και διακόπτει με μήνυμα ώστε να διορθωθεί το TTL. Αυτή η στρατηγική διασφαλίζει ότι τυχόν downstream αποτυχίες οφείλονται σε πραγματική ασυμβατότητα και όχι σε parsing errors.

Η normalization αφορά και τα prompts. Όταν ενεργοποιείται ontology-aware prompting, το σύστημα εξάγει κανονικοποιημένο λεξιλόγιο από το gold TTL (classes, properties, prefixes) και το μετατρέπει σε δομημένο context. Η εξαγωγή αυτή λειτουργεί ως “normalized vocabulary” ώστε το LLM να μην μαντεύει ονόματα ή namespaces. Είναι ουσιώδες να εμφανίζεται η οντολογική πληροφορία με ομοιόμορφη μορφή, ειδικά όταν συγκρίνονται outputs μεταξύ διαφορετικών domains.

Συνολικά, η προεπεξεργασία στο OG–NSD στοχεύει στην τυποποίηση των εισόδων χωρίς να τροποποιεί το semantic περιεχόμενο. Αυτή η ισορροπία επιτρέπει στο LLM να δουλέψει πάνω σε “καθαρές” απαιτήσεις, ενώ τα symbolic modules (SHACL, reasoner) λαμβάνουν πλήρως έγκυρα RDF graphs. Για μια ακαδημαϊκή εργασία, το στάδιο αυτό πρέπει να αναφερθεί ρητά ως υποδομή αξιοπιστίας, επειδή διασφαλίζει ότι τα αποτελέσματα προκύπτουν από το pipeline και όχι από λάθη μορφοποίησης.
