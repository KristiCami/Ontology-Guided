@prefix atm: <http://lod.csd.auth.gr/atm/atm.ttl#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

atm:Withdrawal a owl:Class ;
    rdfs:subClassOf [ a owl:Restriction ;
            owl:onProperty atm:dispensedAmount ;
            owl:someValuesFrom xsd:decimal ] .

atm:Message a atm:Message ;
    atm:messageCode "Error: Transaction not successful"^^xsd:string .

atm:Authorization a atm:Authorization ;
    atm:authorizedBy atm:Transaction .

atm:Transaction a atm:Transaction,
        owl:Class ;
    atm:authorizedBy atm:Authorization ;
    atm:onAccount atm:Account ;
    atm:receivesMessageFrom atm:BankComputer ;
    atm:usesCard atm:CashCard ;
    rdfs:subClassOf [ a owl:Restriction ;
            owl:onProperty atm:authorizedBy ;
            owl:someValuesFrom atm:Authorization ],
        [ a owl:Restriction ;
            owl:onProperty atm:requestedAmount ;
            owl:someValuesFrom [ a owl:Restriction ;
                    owl:maxExclusive 1000.0 ;
                    owl:onProperty atm:requestedAmount ] ],
        [ a owl:Restriction ;
            owl:onProperty atm:handlesTransaction ;
            owl:someValuesFrom atm:ATM ],
        [ a owl:Restriction ;
            owl:onProperty atm:usesCard ;
            owl:someValuesFrom atm:CashCard ] .

atm:BankComputer a atm:BankComputer ;
    atm:checksBankCode atm:CashCard ;
    atm:checksPassword atm:CashCard ;
    atm:operatedBy atm:ATM ;
    atm:receivesMessageFrom atm:ATM ;
    atm:sendsMessageTo atm:ATM .

atm:ATM a atm:ATM ;
    atm:bankCode atm:CashCard ;
    atm:handlesTransaction atm:Transaction ;
    atm:issuesCard atm:Bank ;
    atm:operatedBy atm:Bank ;
    atm:receivesMessageFrom atm:BankComputer ;
    atm:sendsMessageTo atm:BankComputer ;
    atm:serialNumber atm:CashCard ;
    atm:usesCard atm:CashCard .

atm:CashCard a atm:CashCard ;
    atm:bankCode "XYZ123"^^xsd:string ;
    atm:issuesCard atm:Bank ;
    atm:serialNumber "123456789"^^xsd:string,
        "retrieved_serial_number"^^xsd:string .

