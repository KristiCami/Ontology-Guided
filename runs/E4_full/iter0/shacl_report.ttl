@prefix atm: <http://lod.csd.auth.gr/atm/atm.ttl#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

[] a sh:ValidationReport ;
    sh:conforms false ;
    sh:result [ a sh:ValidationResult ;
            sh:focusNode atm:CashCard ;
            sh:resultMessage "CashCard must have exactly one serialNumber." ;
            sh:resultPath atm:serialNumber ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:DatatypeConstraintComponent ;
            sh:sourceShape _:n77265ad357e84b55808a895673c5bc9ab9 ;
            sh:value atm:CashCard ],
        [ a sh:ValidationResult ;
            sh:focusNode atm:CashCard ;
            sh:resultMessage "Each CashCard must be owned by at least one Customer." ;
            sh:resultPath [ sh:inversePath atm:ownsCard ] ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:MinCountConstraintComponent ;
            sh:sourceShape [ sh:class atm:Customer ;
                    sh:message "Each CashCard must be owned by at least one Customer." ;
                    sh:minCount 1 ;
                    sh:path [ sh:inversePath atm:ownsCard ] ;
                    sh:severity sh:Violation ] ],
        [ a sh:ValidationResult ;
            sh:focusNode atm:ATM ;
            sh:resultMessage "ATM must be associated with a Bank via operatedBy." ;
            sh:resultPath atm:operatedBy ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:ClassConstraintComponent ;
            sh:sourceShape [ sh:class atm:Bank ;
                    sh:message "ATM must be associated with a Bank via operatedBy." ;
                    sh:minCount 1 ;
                    sh:path atm:operatedBy ;
                    sh:severity sh:Violation ] ;
            sh:value atm:Bank ],
        [ a sh:ValidationResult ;
            sh:focusNode atm:CashCard ;
            sh:resultMessage "CashCard must have exactly one serialNumber." ;
            sh:resultPath atm:serialNumber ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:MaxCountConstraintComponent ;
            sh:sourceShape _:n77265ad357e84b55808a895673c5bc9ab9 ],
        [ a sh:ValidationResult ;
            sh:focusNode atm:Transaction ;
            sh:resultMessage "Every transaction must be linked to an Authorization." ;
            sh:resultPath atm:authorizedBy ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:MinCountConstraintComponent ;
            sh:sourceShape [ sh:class atm:Authorization ;
                    sh:message "Every transaction must be linked to an Authorization." ;
                    sh:minCount 1 ;
                    sh:path atm:authorizedBy ;
                    sh:severity sh:Violation ] ],
        [ a sh:ValidationResult ;
            sh:focusNode atm:Transaction ;
            sh:resultMessage "Every transaction must have a timestamp (xsd:dateTime)." ;
            sh:resultPath atm:transactionTimestamp ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:DatatypeConstraintComponent ;
            sh:sourceShape [ sh:datatype xsd:dateTime ;
                    sh:message "Every transaction must have a timestamp (xsd:dateTime)." ;
                    sh:minCount 1 ;
                    sh:path atm:transactionTimestamp ;
                    sh:severity sh:Violation ] ;
            sh:value xsd:dateTime ],
        [ a sh:ValidationResult ;
            sh:focusNode atm:CashCard ;
            sh:resultMessage "CashCard must have exactly one bankCode." ;
            sh:resultPath atm:bankCode ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:DatatypeConstraintComponent ;
            sh:sourceShape [ sh:datatype xsd:string ;
                    sh:maxCount 1 ;
                    sh:message "CashCard must have exactly one bankCode." ;
                    sh:minCount 1 ;
                    sh:path atm:bankCode ;
                    sh:severity sh:Violation ] ;
            sh:value atm:CashCard ] .

_:n77265ad357e84b55808a895673c5bc9ab9 sh:datatype xsd:string ;
    sh:maxCount 1 ;
    sh:message "CashCard must have exactly one serialNumber." ;
    sh:minCount 1 ;
    sh:path atm:serialNumber ;
    sh:severity sh:Violation .

